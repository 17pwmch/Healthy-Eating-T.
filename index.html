<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Healthy Eating Challenge</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/face-landmarks-detection"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
    
    * {
      font-family: 'Fredoka', 'Comic Sans MS', cursive, sans-serif;
    }
    
    .game-container {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
      overflow: hidden;
    }
    
    .food-item {
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    
    .food-item:hover {
      transform: scale(1.1);
    }
    
    @keyframes fall {
      from {
        transform: translateY(-100px);
      }
      to {
        transform: translateY(calc(100vh + 100px));
      }
    }
    
    .falling {
      animation: fall linear forwards;
    }
    
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }
    
    .pulse {
      animation: pulse 1s ease-in-out infinite;
    }
    
    .character {
      transition: all 0.5s ease;
    }
    
    #videoElement {
      transform: scaleX(-1);
    }
    
    .mouth-indicator {
      transition: all 0.2s ease;
    }
    
    .mouth-open {
      background: #10b981 !important;
      transform: scale(1.3);
      box-shadow: 0 0 30px #10b981;
    }

    .debug-info {
      font-size: 14px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 8px;
      border-radius: 8px;
    }
  </style>
 </head>
 <body class="h-full m-0 p-0">
  <div id="app" class="w-full h-full"></div>
  <script>
    const defaultConfig = {
      game_title: "üçé Healthy Eating Challenge ü•ó",
      instruction_text: "Open your mouth WIDE to catch food! Choose healthy foods to stay fit!",
      background_color: "#667eea",
      surface_color: "#ffffff",
      text_color: "#1f2937",
      primary_action_color: "#10b981",
      secondary_action_color: "#8b5cf6"
    };

    let config = { ...defaultConfig };
    let detector = null;
    let videoStream = null;
    let gameState = {
      screen: 'menu',
      level: 1,
      score: 0,
      healthyCount: 0,
      junkCount: 0,
      lives: 3,
      mouthOpen: false,
      gameActive: false,
      playerName: '',
      fallingItems: [],
      mouthDistance: 0,
      faceDetected: false
    };

    const levels = [
      { name: "Breakfast Challenge", duration: 30, speed: 4 },
      { name: "Lunch Rush", duration: 40, speed: 3.5 },
      { name: "Dinner Dash", duration: 50, speed: 3 },
      { name: "Midnight Snack", duration: 60, speed: 2.5 },
      { name: "Ultimate Food Master", duration: 90, speed: 2 }
    ];

    const healthyFoods = ['üçé', 'ü•ó', 'ü•¶', 'ü•ï', 'üçä', 'üçá', 'ü•ë', 'üçì'];
    const junkFoods = ['üçî', 'üçï', 'üçü', 'üç©', 'üç∞', 'üå≠', 'üçø', 'üç´'];
    const bombs = ['üí£'];

    async function setupCamera() {
      try {
        showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á... / Opening camera...', 'info');
        
        videoStream = await navigator.mediaDevices.getUserMedia({ 
          video: { 
            facingMode: 'user',
            width: { ideal: 640 },
            height: { ideal: 480 }
          } 
        });
        
        const video = document.getElementById('videoElement');
        if (video) {
          video.srcObject = videoStream;
          await video.play();
          
          showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Face Detection... / Loading face detection...', 'info');
          
          const model = faceLandmarksDetection.SupportedModels.MediaPipeFaceMesh;
          const detectorConfig = {
            runtime: 'tfjs',
            refineLandmarks: true,
            maxFaces: 1
          };
          
          detector = await faceLandmarksDetection.createDetector(model, detectorConfig);
          
          showToast('‚úÖ ‡∏≠‡πâ‡∏≤‡∏õ‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á! / Open mouth WIDE!', 'success');
          detectMouth();
        }
      } catch (error) {
        console.error('Camera error:', error);
        showToast('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á / Please allow camera access', 'error');
      }
    }

    async function detectMouth() {
      if (!gameState.gameActive || !detector) return;

      const video = document.getElementById('videoElement');
      if (!video || video.readyState < 2) {
        requestAnimationFrame(detectMouth);
        return;
      }

      try {
        const faces = await detector.estimateFaces(video);
        
        if (faces.length > 0) {
          gameState.faceDetected = true;
          const keypoints = faces[0].keypoints;
          
          // ‡πÉ‡∏ä‡πâ‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡∏£‡∏¥‡∏°‡∏ù‡∏µ‡∏õ‡∏≤‡∏Å‡∏ö‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡πà‡∏≤‡∏á
          const upperLip = keypoints[13]; // Upper lip
          const lowerLip = keypoints[14]; // Lower lip
          
          if (upperLip && lowerLip) {
            const mouthOpenDistance = Math.abs(lowerLip.y - upperLip.y);
            gameState.mouthDistance = Math.round(mouthOpenDistance);
            
            const wasClosed = !gameState.mouthOpen;
            // ‡∏•‡∏î‡∏Ñ‡πà‡∏≤ threshold ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
            gameState.mouthOpen = mouthOpenDistance > 12;
            
            const indicator = document.getElementById('mouthIndicator');
            if (indicator) {
              if (gameState.mouthOpen) {
                indicator.classList.add('mouth-open');
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏≤‡∏Å‡πÄ‡∏õ‡∏¥‡∏î
                checkFoodCatch();
              } else {
                indicator.classList.remove('mouth-open');
              }
            }
            
            // Update debug info
            updateDebugInfo();
          }
        } else {
          gameState.faceDetected = false;
        }
      } catch (error) {
        console.error('Face detection error:', error);
      }

      if (gameState.gameActive) {
        requestAnimationFrame(detectMouth);
      }
    }

    function updateDebugInfo() {
      const debugEl = document.getElementById('debugInfo');
      if (debugEl) {
        debugEl.innerHTML = `
          Face: ${gameState.faceDetected ? '‚úÖ' : '‚ùå'} | 
          Mouth: ${gameState.mouthDistance}px ${gameState.mouthOpen ? 'üòÆ OPEN' : 'üòê closed'} | 
          Items: ${gameState.fallingItems.filter(i => !i.caught).length}
        `;
      }
    }

    function checkFoodCatch() {
      if (!gameState.mouthOpen) return;

      const catchZone = document.getElementById('catchZone');
      if (!catchZone) return;

      const catchRect = catchZone.getBoundingClientRect();
      const catchZoneTop = catchRect.top;
      const catchZoneBottom = catchRect.bottom;
      const catchZoneLeft = catchRect.left;
      const catchZoneRight = catchRect.right;

      gameState.fallingItems.forEach((item) => {
        if (item.caught) return;

        const element = document.getElementById(`food-${item.id}`);
        if (!element) return;

        const rect = element.getBoundingClientRect();
        const itemCenterY = rect.top + rect.height / 2;
        const itemCenterX = rect.left + rect.width / 2;

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏à‡∏±‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏ã‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô)
        const verticalOverlap = itemCenterY >= catchZoneTop - 50 && itemCenterY <= catchZoneBottom + 50;
        const horizontalOverlap = itemCenterX >= catchZoneLeft - 50 && itemCenterX <= catchZoneRight + 50;

        if (verticalOverlap && horizontalOverlap) {
          item.caught = true;
          element.style.display = 'none';

          if (item.type === 'bomb') {
            gameState.lives--;
            showToast('üí• ‡πÇ‡∏î‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î! / Hit a bomb!', 'error');
            playSound('bomb');
            if (gameState.lives <= 0) {
              endGame();
            }
          } else if (item.type === 'healthy') {
            gameState.score += 10;
            gameState.healthyCount++;
            showToast('‚ú® ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡∏µ! +10', 'success');
            playSound('success');
          } else {
            gameState.score += 5;
            gameState.junkCount++;
            showToast('üçî ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏¢‡∏∞ +5', 'warning');
            playSound('junk');
          }

          updateGameUI();
        }
      });
    }

    function playSound(type) {
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á feedback ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      if (type === 'success') {
        oscillator.frequency.value = 800;
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
      } else if (type === 'bomb') {
        oscillator.frequency.value = 100;
        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
      } else {
        oscillator.frequency.value = 400;
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
      }
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.3);
    }

    function startGame(level) {
      gameState.level = level;
      gameState.score = 0;
      gameState.healthyCount = 0;
      gameState.junkCount = 0;
      gameState.lives = 3;
      gameState.gameActive = true;
      gameState.fallingItems = [];
      gameState.screen = 'game';
      
      render();
      setupCamera();
      spawnFoodItems();
      startGameTimer();
    }

    function spawnFoodItems() {
      if (!gameState.gameActive) return;

      const levelData = levels[gameState.level - 1];
      
      // ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á
      const rand = Math.random();
      let randomFood;
      
      if (rand < 0.5) {
        randomFood = healthyFoods[Math.floor(Math.random() * healthyFoods.length)];
      } else if (rand < 0.85) {
        randomFood = junkFoods[Math.floor(Math.random() * junkFoods.length)];
      } else {
        randomFood = bombs[0];
      }
      
      let type = 'healthy';
      if (junkFoods.includes(randomFood)) type = 'junk';
      if (bombs.includes(randomFood)) type = 'bomb';

      const item = {
        id: Date.now() + Math.random(),
        emoji: randomFood,
        type: type,
        x: Math.random() * 70 + 15, // ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏Å‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
        caught: false
      };

      gameState.fallingItems.push(item);

      const gameArea = document.getElementById('gameArea');
      if (gameArea) {
        const foodEl = document.createElement('div');
        foodEl.id = `food-${item.id}`;
        foodEl.className = 'falling food-item';
        foodEl.style.cssText = `
          position: absolute;
          left: ${item.x}%;
          top: -100px;
          font-size: 56px;
          z-index: 10;
          animation-duration: ${levelData.speed}s;
          filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
        `;
        foodEl.textContent = item.emoji;
        gameArea.appendChild(foodEl);

        setTimeout(() => {
          if (foodEl.parentNode) {
            foodEl.remove();
          }
          // ‡∏•‡∏ö item ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å array
          const index = gameState.fallingItems.indexOf(item);
          if (index > -1) {
            gameState.fallingItems.splice(index, 1);
          }
        }, levelData.speed * 1000);
      }

      // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£
      setTimeout(() => spawnFoodItems(), 1200 / Math.sqrt(levelData.speed));
    }

    function startGameTimer() {
      const levelData = levels[gameState.level - 1];
      let timeLeft = levelData.duration;

      const timer = setInterval(() => {
        if (!gameState.gameActive) {
          clearInterval(timer);
          return;
        }

        timeLeft--;
        const timerEl = document.getElementById('timer');
        if (timerEl) {
          timerEl.textContent = `‚è±Ô∏è ${timeLeft}s`;
        }

        if (timeLeft <= 0) {
          clearInterval(timer);
          endGame();
        }
      }, 1000);
    }

    function endGame() {
      gameState.gameActive = false;
      
      if (videoStream) {
        videoStream.getTracks().forEach(track => track.stop());
      }

      gameState.screen = 'result';
      render();
    }

    function updateGameUI() {
      const scoreEl = document.getElementById('score');
      const livesEl = document.getElementById('lives');
      
      if (scoreEl) scoreEl.textContent = `üèÜ ${gameState.score}`;
      if (livesEl) livesEl.textContent = `‚ù§Ô∏è ${gameState.lives}`;
    }

    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = 'fixed top-20 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg z-50 font-bold';
      toast.style.cssText = `
        background: ${type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#f59e0b'};
        color: white;
      `;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.remove(), 2000);
    }

    function getCharacterEmoji() {
      const ratio = gameState.healthyCount / (gameState.healthyCount + gameState.junkCount || 1);
      if (ratio > 0.7) return 'üí™üòä';
      if (ratio > 0.4) return 'üòê';
      return 'üò∞üçî';
    }

    function getResultMessage() {
      const ratio = gameState.healthyCount / (gameState.healthyCount + gameState.junkCount || 1);
      if (ratio > 0.7) return '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏°‡∏≤‡∏Å! / Excellent Health!';
      if (ratio > 0.4) return '‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ / Fair Health';
      return '‡∏Ñ‡∏ß‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô / Need Better Choices!';
    }

    function render() {
      const app = document.getElementById('app');
      const bgColor = config.background_color;
      const surfaceColor = config.surface_color;
      const textColor = config.text_color;
      const primaryColor = config.primary_action_color;
      const secondaryColor = config.secondary_action_color;

      if (gameState.screen === 'menu') {
        app.innerHTML = `
          <div class="game-container w-full h-full flex items-center justify-center p-8" style="background: ${bgColor};">
            <div class="text-center max-w-2xl" style="background: ${surfaceColor}; border-radius: 24px; padding: 48px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
              <h1 class="text-6xl font-bold mb-6 pulse" style="color: ${textColor};">${config.game_title}</h1>
              <p class="text-xl mb-8" style="color: ${textColor};">${config.instruction_text}</p>
              
              <div class="mb-6 p-4 rounded-xl" style="background: ${primaryColor}20; border: 2px solid ${primaryColor};">
                <p class="text-lg font-bold" style="color: ${textColor};">üí° ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏•‡πà‡∏ô / How to Play:</p>
                <p style="color: ${textColor};">‡∏≠‡πâ‡∏≤‡∏õ‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á üòÆ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°</p>
                <p style="color: ${textColor};">Open mouth WIDE when food passes the circle!</p>
              </div>
              
              <input 
                type="text" 
                id="playerNameInput" 
                placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì / Your Name" 
                class="w-full px-6 py-4 text-xl rounded-xl mb-6 border-4 outline-none"
                style="border-color: ${primaryColor}; color: ${textColor};"
              />
              
              <div class="space-y-4">
                ${levels.map((level, index) => `
                  <button 
                    onclick="gameState.playerName = document.getElementById('playerNameInput').value || 'Player'; startGame(${index + 1})"
                    class="w-full px-8 py-4 text-xl font-bold rounded-xl transition-all hover:scale-105"
                    style="background: ${index === 0 ? primaryColor : secondaryColor}; color: white;"
                  >
                    Level ${index + 1}: ${level.name} (${level.duration}s)
                  </button>
                `).join('')}
              </div>
            </div>
          </div>
        `;
      } else if (gameState.screen === 'game') {
        app.innerHTML = `
          <div class="game-container w-full h-full relative" style="background: ${bgColor};">
            <div class="absolute top-4 left-4 right-4 flex justify-between items-center z-20">
              <div class="flex gap-4 flex-wrap">
                <div class="px-6 py-3 rounded-xl font-bold text-2xl" style="background: ${surfaceColor}; color: ${textColor};" id="score">üèÜ 0</div>
                <div class="px-6 py-3 rounded-xl font-bold text-2xl" style="background: ${surfaceColor}; color: ${textColor};" id="lives">‚ù§Ô∏è 3</div>
                <div class="px-6 py-3 rounded-xl font-bold text-2xl" style="background: ${surfaceColor}; color: ${textColor};" id="timer">‚è±Ô∏è ${levels[gameState.level - 1].duration}s</div>
              </div>
            </div>

            <div class="absolute top-20 left-4 z-20 debug-info" id="debugInfo">
              Loading...
            </div>

            <div id="gameArea" class="w-full h-full relative">
              <div id="catchZone" class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 rounded-full flex items-center justify-center z-30" style="background: ${primaryColor}30; border: 4px dashed ${primaryColor};">
                <div id="mouthIndicator" class="w-20 h-20 rounded-full mouth-indicator transition-all" style="background: ${secondaryColor};"></div>
              </div>
            </div>

            <div class="absolute bottom-4 right-4 z-20">
              <video id="videoElement" width="240" height="180" autoplay muted playsinline class="rounded-xl shadow-lg" style="border: 4px solid ${surfaceColor};"></video>
            </div>

            <div class="absolute bottom-4 left-4 z-20 px-4 py-2 rounded-lg text-white font-bold" style="background: rgba(0,0,0,0.6);">
              üòÆ ‡∏≠‡πâ‡∏≤‡∏õ‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á!<br>Open WIDE!
            </div>
          </div>
        `;
      } else if (gameState.screen === 'result') {
        app.innerHTML = `
          <div class="game-container w-full h-full flex items-center justify-center p-8" style="background: ${bgColor};">
            <div class="text-center max-w-2xl" style="background: ${surfaceColor}; border-radius: 24px; padding: 48px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
              <div class="text-9xl mb-6 pulse">${getCharacterEmoji()}</div>
              <h2 class="text-5xl font-bold mb-4" style="color: ${textColor};">‡πÄ‡∏Å‡∏°‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! / Game Over!</h2>
              <h3 class="text-3xl font-bold mb-8" style="color: ${primaryColor};">${getResultMessage()}</h3>
              
              <div class="grid grid-cols-2 gap-6 mb-8">
                <div class="p-6 rounded-xl" style="background: ${bgColor}20;">
                  <div class="text-5xl mb-2">üèÜ</div>
                  <div class="text-3xl font-bold" style="color: ${textColor};">${gameState.score}</div>
                  <div style="color: ${textColor};">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô / Score</div>
                </div>
                <div class="p-6 rounded-xl" style="background: ${bgColor}20;">
                  <div class="text-5xl mb-2">üçé</div>
                  <div class="text-3xl font-bold" style="color: ${primaryColor};">${gameState.healthyCount}</div>
                  <div style="color: ${textColor};">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡∏µ / Healthy</div>
                </div>
                <div class="p-6 rounded-xl" style="background: ${bgColor}20;">
                  <div class="text-5xl mb-2">üçî</div>
                  <div class="text-3xl font-bold" style="color: ${secondaryColor};">${gameState.junkCount}</div>
                  <div style="color: ${textColor};">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏¢‡∏∞ / Junk</div>
                </div>
                <div class="p-6 rounded-xl" style="background: ${bgColor}20;">
                  <div class="text-5xl mb-2">üìä</div>
                  <div class="text-3xl font-bold" style="color: ${textColor};">${Math.round(gameState.healthyCount / (gameState.healthyCount + gameState.junkCount || 1) * 100)}%</div>
                  <div style="color: ${textColor};">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ / Healthy</div>
                </div>
              </div>

              <button 
                onclick="gameState.screen = 'menu'; render();"
                class="w-full px-8 py-4 text-2xl font-bold rounded-xl transition-all hover:scale-105"
                style="background: ${primaryColor}; color: white;"
              >
                üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π / Back to Menu
              </button>
            </div>
          </div>
        `;
      }
    }

    render();
  </script>
 </body>
</html>
